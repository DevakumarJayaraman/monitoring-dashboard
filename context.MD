# React Frontend Quick Context

## Stack
- React 18 + Vite + TypeScript  
- Tailwind CSS  
- React Router v6  
- Context API (or Redux if needed)  
- React Hook Form for forms  

---

## Rules
- Functional components + hooks only  
- File naming: Components → PascalCase, hooks → useX, files → kebab-case  
- Always type props & API responses  
- Use async/await with try/catch for API calls  
- Keep Tailwind classes clean, extract repeated styles
- reuse components  

---

## Patterns

### Theme Context
```tsx
const ThemeContext = createContext({ theme: "light", toggle: () => {} });
export const ThemeProvider = ({ children }: { children: React.ReactNode }) => {
  const [theme, setTheme] = useState("light");
  return (
    <ThemeContext.Provider value={{ theme, toggle: () => setTheme(t => t === "light" ? "dark" : "light") }}>
      <div className={theme}>{children}</div>
    </ThemeContext.Provider>
  );
};

# Data Format

ServiceInstances = [
  {
    "id": "svc-3001",
    "serviceName": "payment-service",
    "machineName": "apacqa-vm1",
    "Port": 8080,
    "infraType": "linux",
    "profile": "apacqa",
    "uptime": 14400,
    "version": "1.2.3",
    "logURL": "https://logs.example.com/apacqa/payment-service",
    "metricsURL": "https://metrics.example.com/apacqa/payment-service"
  },
  {
    "id": "svc-3002",
    "serviceName": "payment-service",
    "machineName": "apacqa-vm2",
    "Port": 8080,
    "infraType": "linux",
    "profile": "apacqa",
    "uptime": 12600,
    "version": "1.2.3",
    "logURL": "https://logs.example.com/apacqa/payment-service",
    "metricsURL": "https://metrics.example.com/apacqa/payment-service"
  },
  {
    "id": "svc-3003",
    "serviceName": "payment-service",
    "machineName": "apacuat-vm1",
    "Port": 8080,
    "infraType": "linux",
    "profile": "apacuat",
    "uptime": 28800,
    "version": "1.2.3",
    "logURL": "https://logs.example.com/apacuat/payment-service",
    "metricsURL": "https://metrics.example.com/apacuat/payment-service"
  }
]

InfraDetails = [
  {
    "id": "apacqa-vm1",
    "machineName": "apacqa-vm1",
    "region": "APAC",
    "environment": "UAT",
    "datacenter": "ap-southeast-1a",
    "sericesInstances": ["svc-3001"],
    "metrics": {
      "cpu": { "usage": 2.4, "limit": 4, "unit": "vCPU" },
      "memory": { "usage": 8.1, "limit": 16, "unit": "GiB" }
    }
  },
  {
    "id": "apacqa-vm2",
    "machineName": "apacqa-vm2",
    "region": "APAC",
    "environment": "UAT",
    "datacenter": "ap-southeast-1b",
    "sericesInstances": ["svc-3002"],
    "metrics": {
      "cpu": { "usage": 2.6, "limit": 4, "unit": "vCPU" },
      "memory": { "usage": 8.4, "limit": 16, "unit": "GiB" }
    }
  },
  {
    "id": "apacuat-vm1",
    "machineName": "apacuat-vm1",
    "region": "APAC",
    "environment": "UAT",
    "datacenter": "ap-southeast-1a",
    "sericesInstances": ["svc-3003"],
    "metrics": {
      "cpu": { "usage": 1.8, "limit": 4, "unit": "vCPU" },
      "memory": { "usage": 6.2, "limit": 16, "unit": "GiB" }
    }
  }
]


## Backend Design

-- ===============================================
-- Infra Master
-- ===============================================
CREATE TABLE ops_infra (
    infra_id     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    infra_name   VARCHAR2(255) NOT NULL,
    infra_type   VARCHAR2(50) NOT NULL,          -- ecs/linux/windows/dbaas
    hostname     VARCHAR2(255),
    ip_address   VARCHAR2(50),
    environment  VARCHAR2(50),                   -- DEV/UAT/PROD
    version      NUMBER(10) DEFAULT 0 NOT NULL   -- JPA @Version
);

-- ===============================================
-- Infra Resource Limits
-- ===============================================
CREATE TABLE infra_resource_limits (
    limit_id      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    infra_id      NUMBER NOT NULL REFERENCES ops_infra(infra_id),
    resource_name VARCHAR2(100) NOT NULL,        -- cpu, memory, disk
    limit_value   VARCHAR2(100) NOT NULL,
    unit          VARCHAR2(20),
    version       NUMBER(10) DEFAULT 0 NOT NULL
);

-- ===============================================
-- Infra Usage Metrics (time-series)
-- ===============================================
CREATE TABLE ops_infra_usage_metrics (
    metric_id     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    infra_id      NUMBER NOT NULL REFERENCES ops_infra(infra_id),
    metric_name   VARCHAR2(100) NOT NULL,        -- cpu_usage_pct, disk_usage_pct
    metric_value  VARCHAR2(100) NOT NULL,
    unit          VARCHAR2(20),
    metric_date   DATE NOT NULL,                 -- summary date
    metric_time   DATE NOT NULL,                 -- exact timestamp
    version       NUMBER(10) DEFAULT 0 NOT NULL
);

-- ===============================================
-- Services Master
-- ===============================================
CREATE TABLE ops_services (
    service_id    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    service_name  VARCHAR2(255) NOT NULL,
    description   VARCHAR2(2048),
    owning_team   VARCHAR2(100),
    version       NUMBER(10) DEFAULT 0 NOT NULL
);

-- ===============================================
-- Service Deployments (service ↔ infra ↔ profile)
-- ===============================================
CREATE TABLE ops_service_deployments (
    mapping_id    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    service_id    NUMBER NOT NULL REFERENCES ops_services(service_id),
    infra_id      NUMBER NOT NULL REFERENCES ops_infra(infra_id),
    profile       VARCHAR2(100) NOT NULL,
    port          NUMBER,
    version       NUMBER(10) DEFAULT 0 NOT NULL,
    CONSTRAINT uk_service_infra_profile UNIQUE (service_id, infra_id, profile)
);

-- ===============================================
-- Deployment Configs (resource limits per service)
-- ===============================================
CREATE TABLE ops_deployment_configs (
    config_id     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    service_id    NUMBER NOT NULL REFERENCES ops_services(service_id),
    infra_id      NUMBER REFERENCES ops_infra(infra_id),
    profile       VARCHAR2(100),
    resource_name VARCHAR2(100) NOT NULL,        -- cpu, memory, threads
    limit_value   VARCHAR2(100) NOT NULL,
    unit          VARCHAR2(20),
    version       NUMBER(10) DEFAULT 0 NOT NULL,
    CONSTRAINT uk_service_infra_profile_resource 
        UNIQUE (service_id, infra_id, profile, resource_name)
);